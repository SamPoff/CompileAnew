               I2C_ADDR_PORT	EQU 0001
               I2C_DATA_PORT	EQU 0002
               I2C_CMD_PORT	EQU 0003
               I2C_STATUS_PORT	EQU 0004
               SW_ADDR_PORT	EQU 0005
               SW_DATA_PORT	EQU 0006
               READY_FLAG_	EQU 0001
               TEMP_	EQU 0002
               ADDRESS_	EQU 0003
               DATA_	EQU 0004
               CMD_	EQU 0005
               
               MAIN
               			LOAD	R1, 0001
0000 AE01 0001
               			STORE	R1, READY_FLAG_
0002 F401 0001
               			ENINT
0004 1E00               			JUMP	LABEL1	;while loop check condition
0005 A400 0007
               LABEL0
               LABEL1
               			JUMP	LABEL0	;while loop
0007 A400 0007
               
               
               			ADDRESS 0300
               ISR
               			LOAD	R1, 0000
0300 AE01 0000
               			STORE	R1, TEMP_
0302 F401 0002
               			LOAD	R1, 0000
0304 AE01 0000
               			STORE	R1, ADDRESS_
0306 F401 0003
               			LOAD	R1, 0000
0308 AE01 0000
               			STORE	R1, DATA_
030A F401 0004
               			LOAD	R1, 0001
030C AE01 0001
               			STORE	R1, CMD_
030E F401 0005
               			INPUT	R7, I2C_STATUS_PORT
0310 A207 0004
               			STORE	R7, TEMP_
0312 F407 0002
               			FETCH	R6, TEMP_
0314 F006 0002
               			COMP 	R6, 0001
0316 9806 0001
               			JUMPNZ	LABEL2	;if statement
0318 AC00 032e
               			INPUT	R7, SW_ADDR_PORT
031A A207 0005
               			STORE	R7, ADDRESS_
031C F407 0003
               			INPUT	R7, SW_DATA_PORT
031E A207 0006
               			STORE	R7, DATA_
0320 F407 0004
               			FETCH	R7, ADDRESS_
0322 F007 0003
               			OUTPUT	R7, I2C_ADDR_PORT
0324 B807 0001
               			FETCH	R7, DATA_
0326 F007 0004
               			OUTPUT	R7, I2C_DATA_PORT
0328 B807 0002
               			FETCH	R7, CMD_
032A F007 0005
               			OUTPUT	R7, I2C_CMD_PORT
032C B807 0003
               LABEL2
               			RETEN
032E 4600               
               			ADDRESS	0FFE
               
               			JUMP	ISR
0FFE A400 0300
               
               			END